<!DOCTYPE html>

<html lang="en">

    <head>

        <meta charset="UTF-8">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Behavior Page</title>

        <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet" />

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/heroicons@2.0.18/dist/outline/heroicons-outline.css">

        <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

        <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        
    </head>

    <style>

        .behavior-content:target {

            display: block;

        }

        body {

            background-color: #eef1f0;

        }

        .top-navigation {

            color: #2f4870; 
            
            border-color: #bec7d3;

        }

        .top-navigation ul li a{

            color: #2f4870;

            border-color: transparent;

            transition: color 0.3s ease, border-color 0.3s ease;

        }

        .top-navigation ul li a:hover {
            
            color: #40a8e1;

            border-color: #40a8e1;

        }

        .active-tab {

            color: #40a8e1;

            border-color: #40a8e1;

        }

        .behavior {

            color: #2f4870;

        }

        .goal-tabs a{

            background-color: #40a8e1;

            color:#FFFFFF; 

        }

        .goal-tabs .section{

            max-height: 17rem;

        }

        .goal-tabs .section span {

            color: #9dacc0;

        }

        .behavior-details {

            background-color: #fefeff;

            color: #33496f;

            height: 24rem;


        }

        .summary-section {

            background-color: #fefeff;

            height: 17rem;
            
        }

        .summary-section p {

            color: #284068;

        }

        .summary-section .title {

            background-color: #f2f2f2;

        }

        .summary-section span {

            color: #8595b3;

        }

        .comment-section {
            
            background-color: #ffffff;

        }

        .comment-section ul {

            background-color: #eef1f0; 

            color: #364e74;

        }

        .action-buttons .btn1 {

            border-color: #95a5bb;

            background-color: #ffffff;

        }

        .action-buttons .btn2 {

            background-color: #3cb047;

            color: #ffffff;

        }

        .footer .btn1 {

            border-color: #92a3b6;

            background-color: #fefeff;
                
            color: #647b99;

        }

        .footer .btn2 {

            background-color: #43a6e1;

            color: #FFFFFF;

        }

        .gray-background {

            background-color: #eff0f0;

        }

        .text-color {

            color: #3a4c74;

        }

        .ratings-supervisor-comment {

            background-color: #fbde00;

        }

    </style>

    <body id="app" class="m-4">

        <!-- Top Navigation -->
        <div class="top-navigation font-medium border-b w-full md:w-full">

            <ul class="flex flex-wrap -mb-px">
                
                <li class="me-2">

                    <a href="#" class="inline-block p-4 border-b-2 border-transparent rounded-t-lg">Dashboard</a>

                </li>

                <li class=" active-tab me-2">

                    <a href="#" class="inline-block p-4 border-b-2 border-transparent rounded-t-lg">Goals</a>

                </li>

                <li class="me-2">

                    <a href="#" class="inline-block p-4 border-b-2 rounded-t-lg" style="color: #40a8e1; border-color: #40a8e1;">Behavior</a>
               
                </li>

                <li class="me-2">

                    <a href="#" class="inline-block p-4 border-b-2 border-transparent rounded-t-lg">IDP</a>
                
                </li>
                
                <li class="me-2">
                  
                    <a href="#" class="inline-block p-4 border-b-2 border-transparent rounded-t-lg">PIP</a>
               
                </li>
           
            </ul>
        
        </div>

        <div class="behavior flex-col flex sm:flex-row sm:justify-between sm:items-center my-4 ">

            <div class="text-xl font-semibold">My behavior assessment</div>

            <nav class="space-x-4 text-sm flex mt-2 sm:mt-0">

                <div class="flex">

                    <a href="#" class="font-semibold">Performance</a>

                    <button>

                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">

                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        
                        </svg>
    
                    </button>

                </div>

                <div class="flex">

                    <a href="#" class="font-semibold">Self Assessment</a>

                    <button>

                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">

                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        
                        </svg>
    
                    </button>

                </div>

                <div class="flex">

                    <a href="#" class="font-semibold">Behavior assessment</a>

                </div>

            </nav>

        </div>

        <div>

            <div class="flex flex-col sm:flex-row sm:space-x-4">

                <div class="behavior-details w-full sm:w-3/4 p-4 rounded shadow-lg h-auto mt-4 sm:mt-0 overflow-y-auto">

                    <h3 class="font-semibold text-lg">Behavior elements</h3>
                  
                    <span class="">Element Definition</span>
                  
                    <ol class="behavior-content list-decimal ml-5 mt-1"> 

                        <li v-for="(behavior, index) in behaviorElements" :key="behavior.id" class="font-semibold text-lg mb-4">

                            <span class="mr-2">{{ behavior.title }}:</span>

                            <span v-html="behavior.details" class="font-normal text-sm"></span>

                        </li>

                    </ol>
                  
                </div>
                  
                <!-- Summary Section -->
                <div class="summary-section border w-full sm:w-1/4 p-4 rounded block text-sm mt-4 sm:mt-0">
                
                    <h1 class="title font-semibold text-center p-2">Behavior Summary</h1>
                                
                    <p class="border-b py-2 font-medium flex justify-between">Date Created:

                        <span id="date-created" class="text-sm font-normal">{{ summary.date_created }}</span>
                    
                    </p>

                    <p class="border-b py-2 flex font-medium justify-between block">Estimated Mid-year:
                    
                        <span id="mid-year" class="text-sm font-normal">{{ summary.estimated_mid_year }}</span>
                    
                    </p>
                    
                    <p class="border-b py-2 flex font-medium justify-between">Estimated End-year:
                    
                        <span id="end-year" class="text-sm font-normal">{{ summary.estimated_end_year }}</span>
                
                    </p>
            
                </div>

            </div>

        </div>
        
        <!-- Comments Section -->
        <div class="comment-section shadow-lg rounded-xl p-4 mt-0">

            <!-- Tabs -->
            <ul class="max-w-auto w-full sm:w-1/4 flex justify-start space-x-4 p-1 rounded">

                <li v-for="(tab, index) in tabs" :key="index" class="pl-2">

                    <a

                        href="#"
                        class="border mx-auto flex justify-start shadow-lg font-medium rounded p-1 items-center"
                        :class="{ 'bg-white': activeTab === index }"
                        @click.prevent="setActiveTab(index)"

                    >

                        {{ tab.label }}

                    </a>

                </li>

            </ul>

            <!-- Tab Content -->
            <div class="tab-content mt-4">

                <div class="mt-4 text-color">

                    <div v-if="activeTab === 0">

                        <h2 class="font-semibold">Employees comments</h2>


                        <textarea v-modal="employee_comment" class="w-full border rounded-lg p-2"></textarea>

                        <!-- Supervisor Comments -->
                        <h2 class="font-semibold">Supervisor comments</h2>

                        <div class="p-4 rounded-lg text-base gray-background text-color">

                            <div v-html="mid_year.supervisor_comment"></div>

                        </div>

                        <!-- action buttons -->
                        <div class="action-buttons flex justify-end space-x-4 mt-8">
                    
                            <button class="btn1 p-3 border rounded text-sm">Save Draft</button>
        
                            <button @click="submitEmployeeComment()" class="btn2 p-3 rounded text-sm flex items-center space-x-2">

                                <span>Submit Final</span>
                                
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 21l18-9-18-9v7l13.5 2-13.5 2v7z" />
        
                                </svg>
        
                            </button>
        
                        </div>
        

                    </div>

                    <div v-if="activeTab === 1">

                        <h2 class="font-semibold">Employees assessment</h2>

                        <textarea v-modal="employee_assessment" class="w-full border rounded-lg p-2"></textarea>

                        <h2 class="font-semibold">Supervisor assessment</h2>

                        <div class="p-4 rounded-lg gray-background text-color">

                            <div v-html="end_year.supervisor_assessment"></div>

                        </div>

                        <!-- Action buttons -->
                        <div class="action-buttons flex justify-end space-x-4 mt-8">
                    
                            <button class="btn1 p-3 border rounded text-sm">Save Draft</button>
        
                            <button @click="submitEmployeeAssessment()" class="btn2 p-3 rounded text-sm flex items-center space-x-2">

                                <span>Submit Final</span>
                                
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 21l18-9-18-9v7l13.5 2-13.5 2v7z" />
        
                                </svg>
        
                            </button>
        
                        </div>
        

                    </div>

                    <div v-if="activeTab === 2">

                        <h2 class="font-semibold">Sustainability behaviors</h2>

                        <div class="gray-background rounded-lg border w-1/2 p-2 mb-2">

                            <div v-html="ratings.sustainability_behavior"></div> 

                        </div>

                        <h2 class="font-semibold">Supervisor comments</h2>

                        <div class="p-4 rounded-lg ratings-supervisor-comment text-color">

                            <div v-html="ratings.supervisor_comment"></div>

                        </div>

                    </div>                           

                </div>

            </div>

        </div>

        <script>

            const { createApp } = Vue;
        
            createApp({
        
                data() {
        
                    return {
                        employee_comment: '',

                        employee_assessment: '',

                        behaviorElements: [
                            {
                            id: 1,
                            title: "Fostering Safety at the Workplace",
                            details: "Promoting a culture of safety by living the values that encourage a safe working environment. This includes getting informed about and adhering to all safety requirements, ensuring compliance with safety protocols during daily activities, and conducting regular safety audits and observation tours to identify and mitigate risks. Employees are expected to make suggestions for improving safety, report any unsafe acts or conditions immediately, and actively participate in external safety audits and safety culture surveys. Additionally, taking part in safety committees, encouraging colleagues to follow safety rules, and undergoing medical surveillance tests to ensure the health and safety of the workforce are also critical responsibilities."
                            },
                            {
                            id: 2,
                            title: "Protecting the Environment",
                            details: "Being committed to environmental protection by complying with corporate environmental standards and regulatory requirements. This includes reducing wastage by optimizing the use of resources such as water, energy, and raw materials, and recycling wherever possible. Participation in Corporate Social Responsibility (CSR) activities, with a minimum of 16 hours annually, is encouraged to contribute to community environmental projects. Employees are also expected to complete sustainability training on time, focusing on reducing their carbon footprint and promoting eco-friendly practices in both personal and professional life."
                            },
                            {
                            id: 3,
                            title: "Innovation and Business Solutions",
                            details: "Fostering innovation by proactively making suggestions for improving processes and providing business solutions that enhance efficiency. This includes participating in continuous improvement programs, such as Kaizen activities, to identify opportunities for incremental improvements. Staying informed on industry standards and market trends is essential for driving innovation. Employees should also utilize available learning management systems and development tools to stay up-to-date with new skills and technologies. Leveraging cross-functional collaboration is key to ensuring the best possible business solutions."
                            },
                            {
                            id: 4,
                            title: "Valuing Inclusivity & Diversity",
                            details: "Ensuring a workplace that values inclusivity and diversity by fostering collaboration with diverse teams and promoting an environment where all voices are heard and respected. Participation in diversity training and consultations on inclusive practices is encouraged, as well as engagement with employee resource groups or initiatives that focus on diversity. Encouraging open dialogue and understanding different cultural perspectives are key aspects of this behavior. Employees are also encouraged to mentor colleagues from underrepresented groups and contribute to a culture of equity and inclusion within the organization."
                            },
                            {
                            id: 5,
                            title: "Accountability & Responsibility",
                            details: "Demonstrating accountability by taking ownership of tasks and responsibilities, ensuring that work is completed on time and to the highest quality. Employees are expected to provide accurate and timely reports, follow through on commitments, and address issues transparently. This includes being accountable not only for individual performance but also for the team's success, helping to troubleshoot problems, and seeking help when necessary. Taking responsibility for mistakes, learning from them, and making the necessary improvements is a key part of fostering a culture of accountability."
                            },
                            {
                            id: 6,
                            title: "Customer Focus & Service Excellence",
                            details: "Placing the customer at the center of all decisions by actively listening to their needs and providing solutions that exceed expectations. This includes maintaining a high level of service quality, responding to inquiries promptly, and ensuring that customer issues are resolved efficiently. Employees should seek feedback from customers regularly and use this information to improve products and services. Delivering value and maintaining long-term relationships with customers is key to ensuring their continued loyalty and satisfaction."
                            },
                        ],

                        summary: {

                            behavior_id: 1,
                            date_created: '12/08/2023',
                            estimated_mid_year: '12/08/2023',
                            estimated_end_year: '12/05/2024',

                        },

                        mid_year:

                            {

                                supervisor_comment: `<p>The employee has diligently pursued my business goals and individual development plans, consistently meeting business goals. I've actively demonstrated behaviors conducive to teamwork, innovation, and continuous improvement throughout the first half of the year.</p>`

                            },

                        end_year:

                            {

                                supervisor_assessment: `<p>The employee has diligently pursued my business goals and individual development plans, consistently meeting business goals. I've actively demonstrated behaviors conducive to teamwork, innovation, and continuous improvement throughout the first half of the year.</p>`

                            },


                        ratings:

                            {
                                sustainability_behavior: 'Exceeds expectation',

                                supervisor_comment:`<p>Consistently demonstrates and models all required competencies/ behaviors. Is a super excellence in all leadership behaviors; Effective performer - fully achieves all business results.</p>`

                            },
                                    
                        activeTab: 0,
        
                        tabs: [
        
                            { label: 'Mid Year' },
                            { label: 'End Year' },
                            { label: 'Ratings' },
        
                        ],
        
                    };
        
                },
        
                mounted() {
        
                    this.initializeQuillEditor();
        
                },
        
        
                methods: {
        
                    setActiveTab(index) {
        
                        this.activeTab = index;
                        this.$nextTick(() => {
                            this.initializeQuillEditor(); // Reinitialize editor when returning to the relevant tab
                        });
        
                    },

                    async submitEmployeeComment() {

                        if (this.employee_comment.trim() === "") {
                        alert("Comment cannot be empty");
                        return;
                        }

                        const payload = {
                            comment: this.employee_comment,
                            staffId: this.staffId, 
                        };

                        try {
                            const response = await axios.post(this.apiUrl, payload);
                            console.log('Comment submitted successfully:', response.data);
                            this.employee_comment = "";
                            alert('Comment submitted successfully!');
                        } catch (error) {
                            console.error('Error submitting comment:', error);
                            alert('There was an issue submitting your comment.');
                        }

                        },                    

                        async submitEmployeeAssessment() {
                        const payload = {
                            assessment: this.employee_assessment,
                            staffId: this.staffId, 
                        };

                        try {
                            const response = await axios.post(this.apiUrl, payload);
                            console.log('Assessment submitted successfully:', response.data);
                            this.employee_assessment = ""; 
                            alert('Assessment submitted successfully!');
                        } catch (error) {
                            console.error('Error submitting assessment:', error);
                            alert('There was an issue submitting your assessment.');
                        }
                    },  

                    initializeQuillEditor() {
                        this.$nextTick(() => { // Ensure the DOM is updated before initializing
                            const editorContainer = document.querySelector('.quill-editor'); // Target correct element
                            if (editorContainer) {
                                if (this.quillInstance) {
                                    this.quillInstance = null; // Destroy previous instance
                                    editorContainer.innerHTML = ''; // Clear editor container
                                }
                                this.quillInstance = new Quill(editorContainer, {
                                    theme: 'snow',
                                    modules: {
                                        toolbar: [
                                            ['bold', 'italic', 'underline'],
                                            [{'list': 'ordered'}, {'list': 'bullet'}],
                                            ['link']
                                        ]
                                    }
                                }); // Load selected goal metrics
                            }
                        });
                    },
                },
        
            }).mount('#app');
        
        </script>

    </body>
    
</html>
   
